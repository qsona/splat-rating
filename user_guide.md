## 概要

Nintendo Switch™ ゲームソフト「スプラトゥーン2」において、レーティングを利用してプライベートマッチを行えるようにするシステムです。

Discord の Bot として動作します。

### なにそれおいしいの?

あとで書く

## 準備

### splat-rating ボットを使える状態にする

いずれの方法でも、参加者全員が Discord 上の同じサーバーに参加する必要があります。

#### 方法1. サーバーへ招待する

サーバー管理者が以下のリンクをクリックして、サーバーに bot を招待してください。

[リンク](https://discord.com/api/oauth2/authorize?client_id=924305425099280434&permissions=16787520&scope=bot%20applications.commands)

また、募集/ボイス(アルファ/ブラボー)チャンネルを作成しておきます。

#### 方法2. すでにボットが使えるサーバーに入る

以下のサーバーを開放していますので、ご自由にお使いください。

[qs のサーバー (splat-rating)](https://discord.gg/2TZeFa66ut)

### スラッシュコマンドの使い方

この bot は、基本的に Discord チャンネル上で `/sr-` で始まるコマンドを利用して使います。

チャットのメッセージ送信欄に `/sr-` と打つと、選択肢が表示されるので、それを選択すると良いです。コマンドによっては、さらに選択したり入力する必要があります。

試しに `/sr-ping` コマンドを打ってみましょう。`Pong!` というメッセージが返ってくるはずです (返ってこない時は bot アプリケーションが停止している可能性があります...)

Discord を使っている端末によって、この機能が使いにくい場合があるようです。すでに報告されている例で、iPhone アプリを利用しているとき、コマンドを打ったあとに余計なスペースが入ってしまうことがあり、その場合はスペースを削除する必要があるとのことです。

## 遊び方

### レーティング登録

`/sr-register` コマンドで、レーティング登録します。

- rule : ガチマッチのルールです。選択肢から選びます。
  - いまから遊ぶものだけ登録しておけばOKです。いっぺんに全てのルールを登録する必要はありません。
- gachipower : スプラトゥーン2 における自分のガチパワー(推定)を入力します。これがレーティング初期値になります。
  - ウデマエXの人は、自分の平均的なXパワーを入力してください。
  - ウデマエS+以下の人は、ガチマッチに参加したときの部屋の「8人の推定ガチパワー」として、だいたい平均的に出てくる値を入力してください。

以下、おおむねのウデマエとガチパワーの関係を載せておきます。

|ウデマエ|ガチパワー|
|:--|:--|
|S+5|1900|
|S+0|1800|
|S|1700|
|A+|1600|
|A|1500|
|A-|1400|
|B+|1300|
|B|1200|
|B-|1100|
|C+|1000|

### [ゲームマスター] ゲームの作成

`/sr-newgame` コマンドで、ゲームを作成し、募集を受け付けます。

ゲームは、Discord の 1 チャンネルにつき同時に 1 つしか開催できません。

### [ゲーム参加者] ゲームへ参加

`/sr-join` コマンドで、ゲームに参加します。

参加者がゲームマスター含めて 8 人以上になると、マッチングが可能になります。

### [ゲームマスター] マッチングを決める(自動チーム分けを行う)

`/sr-match` コマンドで、次の試合のマッチングを決めます。

- ゲームマスターは必ずアルファチームに所属します。観戦にはなりません。
- ゲーム参加者が8人を超えている場合、ゲームマスター以外の人の誰かが観戦になります。

マッチングが決まったら、チームを確認し、以下を行ってください。

- [ゲームマスター] スプラトゥーン2 上で、アルファチーム/ブラボーチーム/観戦 を指定する
- [ゲーム参加者] ボイスチャンネルを移動する

### [ゲームマスター] 結果を報告する

`/sr-report` コマンドで、いま行った試合の勝敗を報告するか、キャンセルします。

ゲームマスター自身が勝った場合 win , 負けた場合 lose を選択します。(言い換えると、アルファチームの勝敗です)

なんらかの理由で試合が成立せず、メンバーを入れ替えたり終了する必要がある場合、cancel を選択してください。(スプラトゥーン2の回線落ちやルール選択ミスなどで試合が不成立になったが、もう一度同じメンバーで試合する場合は、cancel せずにそのままもう一戦してかまいません)

勝敗を報告すると、レーティングが変動します。

### [ゲーム参加者] ゲームを抜ける

`/sr-leave` コマンドで、ゲームを抜けることができます。

「この試合で最後にしたい」場合、マッチングが作られた後、報告される前までに抜けてしまってかまいません。

### [ゲームマスター] ゲームを解散する

`/sr-break` コマンドで、ゲームを解散します。
